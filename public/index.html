<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”’ SecurePeer - Transfert SÃ©curisÃ©</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="top-header">
        <div class="header-content">
            <div class="header-logo">
                <span class="logo-icon">ğŸ”’</span>
                <span class="logo-text">SecurePeer</span>
            </div>
            <div class="header-actions">
                <button id="theme-toggle" class="theme-toggle" title="Changer de thÃ¨me">ğŸŒ“</button>
                <div class="language-selector">
                    <button id="language-toggle" class="language-toggle" title="Select language">ğŸŒ FR</button>
                    <div id="language-menu" class="language-menu hidden">
                        <button data-lang="fr" class="lang-option">ğŸ‡«ğŸ‡· FranÃ§ais</button>
                        <button data-lang="en" class="lang-option">ğŸ‡¬ğŸ‡§ English</button>
                        <button data-lang="es" class="lang-option">ğŸ‡ªğŸ‡¸ EspaÃ±ol</button>
                        <button data-lang="it" class="lang-option">ğŸ‡®ğŸ‡¹ Italiano</button>
                        <button data-lang="ru" class="lang-option">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</button>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <div class="container">
        <section class="hero">
            <div class="hero-content">
                <h1>ğŸ”’ SecurePeer</h1>
                <p class="subtitle">Transfert de fichiers chiffrÃ© de bout en bout, sans serveur intermÃ©diaire</p>
                <div class="hero-badges">
                    <span>ğŸ” AES-256-GCM</span>
                    <span>ğŸŒ WebRTC P2P</span>
                    <span>ğŸš« Pas de stockage</span>
                </div>
            </div>
        </section>

        <!-- SÃ‰LECTION DU MODE -->
        <section id="mode-selection" class="section mode-selection">
            <div class="mode-header">
                <h2>ğŸš€ CrÃ©er une session</h2>
                <p class="section-desc">Choisissez le type de session que vous souhaitez dÃ©marrer</p>
            </div>
            <div class="mode-cards">
                <button class="mode-card" data-mode="file">
                    <div class="mode-icon">ğŸ“</div>
                    <h3>Transfert de fichiers</h3>
                    <p>Envoyez des fichiers de maniÃ¨re sÃ©curisÃ©e</p>
                </button>
                <button class="mode-card" data-mode="chat">
                    <div class="mode-icon">ğŸ’¬</div>
                    <h3>Chat sÃ©curisÃ©</h3>
                    <p>Discutez en temps rÃ©el, chiffrÃ© E2E</p>
                </button>
                <button class="mode-card" data-mode="both">
                    <div class="mode-icon">ğŸ“ğŸ’¬</div>
                    <h3>Fichiers + Chat</h3>
                    <p>TransfÃ©rez et discutez simultanÃ©ment</p>
                </button>
            </div>
        </section>

        <!-- MODE EXPÃ‰DITEUR (par dÃ©faut) -->
        <section id="sender-section" class="section sender-section hidden">
            <div class="sender-header">
                <h2>ğŸ“¤ Envoyer un fichier</h2>
                <p class="section-desc">Choisissez un fichier et partagez le lien sÃ©curisÃ©</p>
            </div>

            <div id="drop-zone" class="drop-zone">
                <div class="drop-zone-content">
                    <span class="drop-icon">ğŸ“</span>
                    <p><strong>Glissez-dÃ©posez un fichier ici</strong></p>
                    <p class="or">ou cliquez pour sÃ©lectionner</p>
                    <label class="file-input-label">
                        <input type="file" id="file-input" hidden multiple>
                        <span class="btn btn-primary btn-large">Choisir un fichier</span>
                    </label>
                </div>
            </div>

            <!-- Infos fichier sÃ©lectionnÃ© -->
            <div id="file-info" class="file-info hidden">
                <div class="file-icon">ğŸ“„</div>
                <div class="file-details">
                    <span id="file-name" class="file-name"></span>
                    <span id="file-size" class="file-size"></span>
                </div>
                <button id="clear-file" class="btn btn-small">âœ• Supprimer</button>
            </div>

            <!-- Mot de passe (optionnel) -->
            <div class="password-block hidden" id="password-block">
                <label for="password-input">ğŸ” Protection par mot de passe (optionnel)</label>
                <input type="password" id="password-input" placeholder="Entrez un mot de passe pour plus de sÃ©curitÃ©">
                <p class="hint">Le mot de passe ne quitte jamais votre appareil</p>
                <button id="send-file-btn" class="btn btn-primary btn-large">ğŸ“¤ Envoyer le fichier</button>
            </div>

            <!-- Zone de lien Ã  partager -->
            <div id="link-section" class="link-section hidden">
                <div class="link-header">
                    <h3>ğŸ”— Lien de partage gÃ©nÃ©rÃ©</h3>
                    <p class="link-info">Partagez ce lien avec le destinataire</p>
                </div>
                <div class="link-container">
                    <input type="text" id="share-link" readonly class="share-link-input">
                    <button id="copy-link" class="btn btn-primary">ğŸ“‹ Copier</button>
                </div>
                <div id="qrcode-container" class="qrcode-container hidden">
                    <div id="qrcode"></div>
                    <p class="qrcode-hint">Scannez pour recevoir sur mobile</p>
                </div>
                <p id="link-status" class="status status-waiting">
                    <span class="pulse"></span>
                    En attente du destinataire...
                </p>
            </div>

            <!-- Zone de Chat (visible si mode chat ou both) -->
            <div id="chat-section" class="chat-section hidden">
                <div class="chat-header">
                    <h3>ğŸ’¬ Chat sÃ©curisÃ©</h3>
                    <span class="chat-status" id="chat-status">En attente...</span>
                </div>
                <div class="chat-messages" id="chat-messages">
                    <!-- Messages dynamiques -->
                </div>
                <div class="chat-input-container">
                    <input type="text" id="chat-input" placeholder="Tapez votre message..." autocomplete="off">
                    <button id="chat-send" class="btn btn-primary">Envoyer</button>
                </div>
            </div>
            
            <!-- Zone de fichiers pour mode both (cÃ´tÃ© expÃ©diteur) -->
            <div id="both-file-section" class="both-file-section hidden">
                <div class="both-file-header">
                    <h4>ğŸ“ Fichiers</h4>
                </div>
                <div id="both-file-list" class="both-file-list">
                    <!-- Liste des fichiers reÃ§us/envoyÃ©s -->
                </div>
                <div class="both-file-input">
                    <label class="btn btn-small btn-file-select">
                        <input type="file" id="both-file-input" hidden multiple>
                        ğŸ“ Ajouter
                    </label>
                    <button id="both-file-send" class="btn btn-primary btn-small" disabled>ğŸ“¤ Envoyer</button>
                </div>
            </div>
        </section>

        <!-- MODE DESTINATAIRE -->
        <section id="receiver-section" class="section hidden">
            <div class="receiver-info">
                <h2 id="receiver-title">ğŸ“¥ RÃ©ception de fichier</h2>

                <div id="receiver-password-block" class="password-block hidden">
                    <label for="receiver-password">Mot de passe requis</label>
                    <input type="password" id="receiver-password" placeholder="Entrez le mot de passe partagÃ©">
                    <button id="receiver-password-apply" class="btn btn-primary">DÃ©verrouiller</button>
                    <p class="hint">Le mot de passe reste sur cet appareil et dÃ©rive la clÃ© de chiffrement.</p>
                </div>

                <div id="incoming-file-info" class="incoming-file-info">
                    <div class="file-icon large">ğŸ“„</div>
                    <p id="incoming-file-name" class="file-name"></p>
                    <p id="incoming-file-size" class="file-size"></p>
                </div>
                <button id="receive-file-btn" class="btn btn-primary hidden">ğŸ“¥ Recevoir le fichier</button>
                <p id="receiver-status" class="status">Connexion en cours...</p>
            </div>

            <!-- Zone de Chat cÃ´tÃ© destinataire -->
            <div id="receiver-chat-section" class="chat-section hidden">
                <div class="chat-header">
                    <h3>ğŸ’¬ Chat sÃ©curisÃ©</h3>
                    <span class="chat-status" id="receiver-chat-status">ConnectÃ©</span>
                </div>
                <div class="chat-messages" id="receiver-chat-messages">
                    <!-- Messages dynamiques -->
                </div>
                <div class="chat-input-container">
                    <input type="text" id="receiver-chat-input" placeholder="Tapez votre message..." autocomplete="off">
                    <button id="receiver-chat-send" class="btn btn-primary">Envoyer</button>
                </div>
            </div>
            
            <!-- Zone de fichiers pour mode both (cÃ´tÃ© destinataire) -->
            <div id="receiver-both-file-section" class="both-file-section hidden">
                <div class="both-file-header">
                    <h4>ğŸ“ Fichiers</h4>
                </div>
                <div id="receiver-both-file-list" class="both-file-list">
                    <!-- Liste des fichiers reÃ§us/envoyÃ©s -->
                </div>
                <div class="both-file-input">
                    <label class="btn btn-small btn-file-select">
                        <input type="file" id="receiver-both-file-input" hidden multiple>
                        ğŸ“ Ajouter
                    </label>
                    <button id="receiver-both-file-send" class="btn btn-primary btn-small" disabled>ğŸ“¤ Envoyer</button>
                </div>
            </div>
        </section>

        <!-- BARRE DE PROGRESSION (commune) -->
        <section id="progress-section" class="section hidden">
            <h3 id="progress-title">Transfert en cours...</h3>
            <div class="progress-container">
                <div class="progress-bar">
                    <div id="progress-fill" class="progress-fill"></div>
                </div>
                <div class="progress-stats">
                    <span id="progress-percent">0%</span>
                    <span id="progress-speed"></span>
                    <span id="progress-transferred"></span>
                </div>
            </div>
        </section>

        <!-- SECTION TERMINÃ‰E -->
        <section id="complete-section" class="section hidden">
            <div class="complete-content">
                <div class="complete-icon">âœ…</div>
                <h2>Transfert terminÃ© !</h2>
                <p id="complete-message"></p>
                <div id="integrity-check" class="integrity-check">
                    <span class="integrity-icon">ğŸ”</span>
                    <span>IntÃ©gritÃ© vÃ©rifiÃ©e (SHA-256)</span>
                </div>
                <button id="new-transfer" class="btn btn-primary">Nouveau transfert</button>
            </div>
        </section>

        <!-- SECTION ERREUR -->
        <section id="error-section" class="section hidden">
            <div class="error-content">
                <div class="error-icon">âŒ</div>
                <h2>Erreur</h2>
                <p id="error-message"></p>
                <button id="retry-transfer" class="btn btn-primary">RÃ©essayer</button>
            </div>
        </section>

        <footer>
            <p>ğŸ” Chiffrement AES-256-GCM | ğŸŒ WebRTC P2P | ğŸš« Aucune donnÃ©e stockÃ©e sur le serveur | SecurePeer</p>
        </footer>
    </div>

    <!-- Simple-peer via CDN -->
    <script src="https://unpkg.com/simple-peer@9.11.1/simplepeer.min.js"></script>
    <!-- JSZip for multi-file automatic zipping -->
    <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
    <!-- QRCode.js for link sharing -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="app.js"></script>
</body>
</html>
